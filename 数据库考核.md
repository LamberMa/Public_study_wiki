# Mysql考核

### 知识点梳理

- 数据库的安装

- 数据库的操作

  - 账户的授权：修改user表，grant进行授权，记住要flush privileges，或者直接创建用户进行授权，比如create user xxx@xxx identified by xxx，或者使用grant 权限 on 库名.表名 to user.ip段 identitied by password。


  - 库操作：删（drop），增（create），创建的库名不要是关键字，查（show）

  - 表操作：增删改查，改可以alter，update等等，查，模糊匹配like，删除，删除有delete和truncate，只是删除内容不删除表的定义，drop会删除掉表的定义。

    ```
    说下二者的区别，truncate是要比delete from清空数据快的多的，DELETE 语句每次删除一行，并在事务日志中为所删除的每行记录一项。TRUNCATE TABLE 通过释放存储表数据所用的数据页来删除数据，并且只在事务日志中记录页的释放。 简单来说delete比较慢的原因是它是一行一行删的。
    ```

  - mysql的数据类型（整形（bigint，tinyint），浮点型，字符型（char和varchar，订定长的，和不定长的，varchar相对来讲更节省空间，因为是动态的调整的。但是对应的调用速度要低于char），枚举类型，基本很少用，集合类型，还有时间类型）

  - 主键+外键

    - 主键：一个表只能有一个主键，主键可以联合多列成为联合主键。

    - 外键：是一种约束，保证当前的数据在对应约束表中有对应的内容，目的是保证数据的完整性和一致性。外键可以创建的时候增加，也可以后续alter增加

      ```mysql
      constraint fk_name foreign key(`id`) references department(`id`)
      ```

  - 索引：索引的目的是为了加快访问的速度。

    ```mysql
    CREATE INDEX indexName ON table_name(column(前缀长度length)); 
    ```

    - 普通索引：为想要索引的内容字段添加索引
    - 主键索引：主键的索引
    - 唯一索引：唯一索引索引的字段值允许为空，但是必须唯一。
    - 联合索引：主键联合，唯一联合，普通联合

  - 实体之间的关系：一对多，多对一，多对多

  - 数据库常见用法：

    - 表别名：select xxx from xxx as 

    - 条件：where语句

    - 排序：order by

    - 分组：group by，group by后面不能接where，因此where要在group by之前，如果要对group by的结果做筛选要用having。

    - 表连接：内连接，外链接，全连接（笛卡尔积），left join，right join。左连接和右连接，其实用一个就够了，因为只要会了一个调换一下顺序就行了。坐连接是以左侧的表为基准，对应的要连接的那个表没有数据的话用Null补上。

    - 视图：视图是一个虚拟的表，并非真实存在，它是根据sql语句进行动态的获取数据集，因此视图不能够进行增删改，视图是一条预编译的sql语句，并不保存实际的数据，但是临时表会保存在tempdb中，是一个实际存在的表。开发中并不常用视图。

    - 触发器：

      ```mysql
      # 插入前
      CREATE TRIGGER tri_before_insert_tb1 BEFORE INSERT ON tb1 FOR EACH ROW
      BEGIN
          ...
      END

      # 插入后
      CREATE TRIGGER tri_after_insert_tb1 AFTER INSERT ON tb1 FOR EACH ROW
      BEGIN
          ...
      END
      ```

    - 存储过程

    - 函数

  - pymysql

  - orm

